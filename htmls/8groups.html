<!DOCTYPE html>
<meta charset="utf-8">
<head>
<title>8groups</title>
</head>
<body>
<script src="./js/d3.min.js"></script>
<script>

var width = 800,
    height = 100,
    outerRadius=height/2;
    innerRadius=outerRadius-5;
    τ = 2 * Math.PI; // http://tauday.com/tau-manifesto

// An arc function with all values bound except the endAngle. So, to compute an
// SVG path string for a given angle, we pass an object with an endAngle
// property to the `arc` function, and it will return the corresponding string.
var arc1 = d3.svg.arc()
    .innerRadius(innerRadius)
    .outerRadius(outerRadius)
    .startAngle(0);

var arc2 = d3.svg.arc()
    .innerRadius(innerRadius-8)
    .outerRadius(outerRadius-8)
    .startAngle(0);


// Create the SVG container, and apply a transform such that the origin is the
// center of the canvas. This way, we don't need to position arcs individually.
var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
  //.append("g")
    //.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")

// Add the background arc, from 0 to 100% (τ).
/*
var background = svg.append("path")
    .datum({endAngle: τ})
    .style("fill", "#ddd")
    .attr("d", arc)
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
    ;

// Add the foreground arc in orange, currently showing 12.7%.
var foreground = svg.append("path")
    .datum({endAngle: .37 * τ})
    .style("fill", "orange")
    .attr("d", arc)
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
    ;
*/
/*
svg.append("path")
    .datum({endAngle: τ})
    .style("fill", "#ddd")
    .attr("d", arc)
    .attr("transform", "translate(" + 100 + "," + height / 2 + ")")
    ;
*/

var data=[80,70,60,50,40,30,20,10];

var group = svg.selectAll("svg_group")
  .data(data)
  .enter()
  .append("g")
  .attr("class", 'svg_group')
  .attr("transform", function(d,i){
      return "translate(" + (50+i*((width-50)/8)) + ",12)";
    });

//Add circles to the circleGroup
var circles = group.append("circle")
  .attr("fill","#eee")
  .attr("transform", "translate(10,10)")
  .attr("cx",0)
  .attr("cy",0)
  .attr("r",25);


group.append("text")
  .text( function(d,i) {
    console.log(d,i);
    return d+"%"; 
  });


group.append("text")
  .text("...")
  .attr("transform", "translate(10,10)")
  ;//test

group.append("rect")
  .attr("x",0)
  .attr("y",2)
  .attr("width",function(d,i){return d;})
  .attr("height",2)
  .attr("fill","#c00");


/*
//Create 8 groups
var groups=svg.selectAll('.groups')
  .data(data)
  .append("g")
  .attr("transform", function(d,i){
      return "translate(" + (50+i*((width-50)/8)) + "," + 10 + ")";
    });



var circleAttributes = circles
  .attr("cx", function (d) { return 10; })
  .attr("cy", function (d) { return 10; })
  .attr("r", function (d) { return 5; })
  .style("fill", function (d) { return 'red'; });
*/
/*
var circles=groups.selectAll("circle")
  .data(data).enter().append("circle")
  .cx(10)
  .cy(10)
  .r(5);
*/
/*
//Add a serie of strings
svg.selectAll('.background')
  .data([1,2,3,4,5,6,7,8])
  .enter()
  .append("text")
  .text("{endAngle:τ}")
    .style("fill", "#333")
    .attr("transform", function(d,i){
     // console.log(d,i);
      return "translate(" + (50+i*((width-50)/8)) + "," + 10 t+ ")";
    })
    ;



//Add a serie of arcs
svg.selectAll('.background')
  .data([1,2,3,4,5,6,7,8])
  .enter()
  .append("path")
  .datum({endAngle: τ})
    .style("fill", "#eee")
    .attr("d", arc1)
    .attr("transform", function(d,i){
     // console.log(d,i);
      return "translate(" + (50+i*((width-50)/8)) + "," + height / 2 + ")";
    })
    ;

svg.selectAll('.background')
  .data([1,2,3,4,5,6,7,8])
  .enter()
  .append("path")
  .datum({endAngle: τ})
    .style("fill", "#eee")
    .attr("d", arc2)
    .attr("transform", function(d,i){
     // console.log(d,i);
      return "translate(" + (50+i*((width-50)/8)) + "," + height / 2 + ")";
    })
    ;
*/  

/*
var aa=svg.selectAll('.foreground')
  .data([1,2,3,4,5,6,7,8])
  .enter()
  .append("path")
  .datum({endAngle:3.14})
    .style("fill", "orange")
    .attr("d", arc2)
    .attr("transform", function(d,i){
     // console.log(d,i);
      return "translate(" + (50+i*((width-50)/8)) + "," + height / 2 + ")";
    })
    ;
*/

</script>